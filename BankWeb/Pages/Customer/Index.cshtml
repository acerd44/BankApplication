@page
@model BankWeb.Pages.Customer.IndexModel
@{
}
@{
    ViewData["Title"] = "Customers";
}
@if (Model.PageCount > 0)
{
    <h1 class="text-start">Customers - Page @Model.CurrentPage of @Model.PageCount</h1>
}
else
{
    <h1 class="text-start">Customers - No result found</h1>
}

<form class="text-right" method="get">
    <input asp-for="@Model.Search" />
    <input type="hidden" />
    <input type="submit" value="Search" />
</form>
<br />
<table class="table table-striped">
    <thead>
        <tr>
            <th scope="col">
                Id
                <a asp-page="/Customer/Index" asp-route-search="@Model.Search" asp-route-sortColumn="Id" asp-route-sortOrder="asc" style="text-decoration: none">
                    <i class="fa-solid fa-angle-up"></i>
                </a>
                <a asp-page="/Customer/Index" asp-route-search="@Model.Search" asp-route-sortColumn="Id" asp-route-sortOrder="desc" style="text-decoration: none">
                    <i class="fa-solid fa-angle-down"></i>
                </a>
            </th>
            <th scope="col">
                National Id
            </th>
            <th scope="col">
                Name
                <a asp-page="/Customer/Index" asp-route-search="@Model.Search" asp-route-sortColumn="Name" asp-route-sortOrder="asc" style="text-decoration: none">
                    <i class="fa-solid fa-angle-up"></i>
                </a>
                <a asp-page="/Customer/Index" asp-route-search="@Model.Search" asp-route-sortColumn="Name" asp-route-sortOrder="desc" style="text-decoration: none">
                    <i class="fa-solid fa-angle-down"></i>
                </a>
            </th>
            <th scope="col">
                Country
                <a asp-page="/Customer/Index" asp-route-search="@Model.Search" asp-route-sortColumn="Country" asp-route-sortOrder="asc" style="text-decoration: none">
                    <i class="fa-solid fa-angle-up"></i>
                </a>
                <a asp-page="/Customer/Index" asp-route-search="@Model.Search" asp-route-sortColumn="Country" asp-route-sortOrder="desc" style="text-decoration: none">
                    <i class="fa-solid fa-angle-down"></i>
                </a>
            </th>
            <th scope="col">
                City
                <a asp-page="/Customer/Index" asp-route-search="@Model.Search" asp-route-sortColumn="City" asp-route-sortOrder="asc" style="text-decoration: none">
                    <i class="fa-solid fa-angle-up"></i>
                </a>
                <a asp-page="/Customer/Index" asp-route-search="@Model.Search" asp-route-sortColumn="City" asp-route-sortOrder="desc" style="text-decoration: none">
                    <i class="fa-solid fa-angle-down"></i>
                </a>
            </th>
            <th scope="col">
                Street address
            </th>
            <th scope="col">
                <a class="btn btn-primary" asp-page="/Customer/New" style="text-decoration:none">Add</a>
            </th>
        </tr>
    </thead>
    <tbody>
        @foreach (var customer in Model.Customers)
        {
            <tr>
                <td>@customer.Id</td>
                <td>@customer.NationalId</td>
                <td>@customer.Name</td>
                <td>@customer.Country</td>
                <td>@customer.City</td>
                <td>@customer.Streetaddress</td>
                <td>
                    <a asp-page="/Account/Index" asp-route-customerId="@customer.Id" asp-route-customerName="@customer.Name" class="btn btn-primary">Edit</a>
                    <a asp-page="/Account/Index" asp-route-customerId="@customer.Id" asp-route-customerName="@customer.Name" class="btn btn-primary">View</a>

                </td>
            </tr>
        }
        <tr>
            <td>
                @if (Model.CurrentPage != 1)
                {
                    <a class="btn btn-secondary" asp-page="/Customer/Index"
                       asp-route-search="@Model.Search"
                       asp-route-sortOrder="@Model.SortOrder"
                       asp-route-sortColumn="@Model.SortColumn"
                       asp-route-pageNumber="@(Model.CurrentPage-1)">
                        Prev
                    </a>
                }
            </td>
            <td class="text-center" colspan="5">
                @for (int i = Math.Max(1, Model.CurrentPage - 5); i <= Math.Min(Model.PageCount, Model.CurrentPage + 5); i++)
                {
                    <a class="btn @(Model.CurrentPage == i ? "btn-primary" : "btn-secondary")" asp-page="/Customer/Index"
                       asp-route-search="@Model.Search"
                       asp-route-sortOrder="@Model.SortOrder"
                       asp-route-sortColumn="@Model.SortColumn"
                       asp-route-pageNumber="@i">
                        @i
                    </a>
                }
            </td>

            <td>
                @if (Model.CurrentPage != Model.PageCount && Model.PageCount > 0)
                {
                    <a class="btn btn-secondary" asp-page="/Customer/Index"
                       asp-route-search="@Model.Search"
                       asp-route-sortOrder="@Model.SortOrder"
                       asp-route-sortColumn="@Model.SortColumn"
                       asp-route-pageNumber="@(Model.CurrentPage+1)">
                        Next
                    </a>

                }
            </td>
        </tr>
    </tbody>
</table>